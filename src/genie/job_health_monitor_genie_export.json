{
  "version": 1,
  "config": {
    "sample_questions": [
      {
        "id": "a1b2c3d4e5f6789012345678901234aa",
        "question": [
          "What is our job success rate this week?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234ab",
        "question": [
          "Show me failed jobs today"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234ac",
        "question": [
          "Which jobs have the most failures this month?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234ad",
        "question": [
          "How many jobs ran yesterday?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234ae",
        "question": [
          "What is the P95 job duration?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234af",
        "question": [
          "Which jobs are the slowest?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234b0",
        "question": [
          "Show me job duration percentiles"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234b1",
        "question": [
          "What is the average job runtime?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234b2",
        "question": [
          "What are our most expensive jobs?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234b3",
        "question": [
          "Show me jobs with high repair costs"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234b4",
        "question": [
          "Which jobs have the highest retry rate?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234b5",
        "question": [
          "Which jobs are likely to fail tomorrow?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234b6",
        "question": [
          "What's the health score for the ETL pipeline?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234b7",
        "question": [
          "Will retrying this job succeed?"
        ]
      },
      {
        "id": "a1b2c3d4e5f6789012345678901234b8",
        "question": [
          "Show me jobs with performance regression"
        ]
      }
    ]
  },
  "data_sources": {
    "tables": [
      {
        "identifier": "${catalog}.${gold_schema}.dim_job"
      },
      {
        "identifier": "${catalog}.${gold_schema}.dim_job_task"
      },
      {
        "identifier": "${catalog}.${gold_schema}.dim_workspace"
      },
      {
        "identifier": "${catalog}.${gold_schema}.dim_cluster"
      },
      {
        "identifier": "${catalog}.${gold_schema}.fact_job_run_timeline"
      },
      {
        "identifier": "${catalog}.${gold_schema}.fact_job_task_run_timeline"
      },
      {
        "identifier": "${catalog}.${feature_schema}.job_failure_predictions"
      },
      {
        "identifier": "${catalog}.${feature_schema}.retry_success_predictions"
      },
      {
        "identifier": "${catalog}.${feature_schema}.sla_breach_predictions"
      },
      {
        "identifier": "${catalog}.${feature_schema}.duration_predictions"
      },
      {
        "identifier": "${catalog}.${gold_schema}_monitoring.fact_job_run_timeline_profile_metrics"
      },
      {
        "identifier": "${catalog}.${gold_schema}_monitoring.fact_job_run_timeline_drift_metrics"
      }
    ],
    "metric_views": [
      {
        "identifier": "${catalog}.${gold_schema}.mv_job_performance"
      }
    ]
  },
  "instructions": {
    "text_instructions": [
      {
        "id": "c1d2e3f4a5b6789012345678901234cc",
        "content": [
          "You are a Databricks job reliability analyst. Follow these rules:\n",
          "\n",
          "1. **Asset Selection:** Use Metric View for current state, TVFs for lists, Custom Metrics for trends\n",
          "2. **Primary Source:** Use mv_job_performance metric view for dashboard KPIs\n",
          "3. **TVFs for Lists:** Use TVFs for \"which jobs\", \"top N\", \"list\" queries - always wrap in TABLE()\n",
          "4. **Trends:** For \"is success rate degrading?\" check _drift_metrics tables\n",
          "5. **Date Default:** If no date specified, default to last 7 days\n",
          "6. **Aggregation:** Use COUNT for volumes, AVG for averages\n",
          "7. **Sorting:** Sort by failure_rate DESC or duration DESC\n",
          "8. **Limits:** Top 10-20 for ranking queries\n",
          "9. **Percentages:** Success/failure rates as % with 1 decimal\n",
          "10. **Duration:** Show in minutes for readability\n",
          "11. **Synonyms:** job=workflow=pipeline, failure=error=crash\n",
          "12. **ML Predictions:** For \"likely to fail\" \u2192 query job_failure_predictions with ${feature_schema}\n",
          "13. **Failed Jobs:** For \"failed jobs today\" \u2192 use get_failed_jobs(days_back) with TABLE()\n",
          "14. **Custom Metrics:** Always include required filters (column_name=':table', log_type='INPUT')\n",
          "15. **Context:** Explain FAILED vs ERROR vs TIMED_OUT\n",
          "16. **Performance:** Never scan Bronze/Silver tables"
        ]
      }
    ],
    "sql_functions": [
      {
        "id": "459ad5bbdfba47fb826e14f1439367ba",
        "identifier": "${catalog}.${gold_schema}.get_failed_jobs"
      },
      {
        "id": "287a5bb1d61348239d928bcb3a7345f9",
        "identifier": "${catalog}.${gold_schema}.get_job_success_rate"
      },
      {
        "id": "1191ab22dda34edea6c7c14bd99854ea",
        "identifier": "${catalog}.${gold_schema}.get_job_duration_percentiles"
      },
      {
        "id": "637750495ce449d4b62fced27557c994",
        "identifier": "${catalog}.${gold_schema}.get_job_sla_compliance"
      },
      {
        "id": "cf4bec8354c7433f91354c0e75aa1ea3",
        "identifier": "${catalog}.${gold_schema}.get_job_failure_trends"
      },
      {
        "id": "d239f087768940558d56213685d02f63",
        "identifier": "${catalog}.${gold_schema}.get_job_outlier_runs"
      },
      {
        "id": "96a48a12f527401cbbf91995b2025e65",
        "identifier": "${catalog}.${gold_schema}.get_job_retry_analysis"
      },
      {
        "id": "835b681d506e45c387ffb8be4520dd37",
        "identifier": "${catalog}.${gold_schema}.get_job_failure_costs"
      },
      {
        "id": "84f152024999457f8802fcbfda7124f4",
        "identifier": "${catalog}.${gold_schema}.get_job_repair_costs"
      },
      {
        "id": "dc580b3bc0704a6783a01d22c8d9bf4a",
        "identifier": "${catalog}.${gold_schema}.get_job_run_details"
      },
      {
        "id": "d751c099676445208ae7509865c7fc9c",
        "identifier": "${catalog}.${gold_schema}.get_job_run_duration_analysis"
      },
      {
        "id": "45cd3781ed984ef797fd3be5a5eca0a4",
        "identifier": "${catalog}.${gold_schema}.get_jobs_without_autoscaling"
      },
      {
        "id": "ad5000093c584589993a9a75f61a5bf4",
        "identifier": "${catalog}.${gold_schema}.get_jobs_on_legacy_dbr"
      }
    ]
  },
  "benchmarks": {
    "questions": [
      {
        "id": "af2840281fbf42b18057b194b7cf44b4",
        "question": [
          "Query get_failed_jobs"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_failed_jobs(\"2025-12-15\", \"2026-01-14\", \"ALL\") LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "295f305ef451435c904f5eaf1b6bf449",
        "question": [
          "Query get_job_success_rate"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_job_success_rate(\"2025-12-15\", \"2026-01-14\", 5) LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "0eaa11ec86b64ef290289d86b65206b6",
        "question": [
          "Query get_job_duration_percentiles"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_job_duration_percentiles(30, \"ALL\") LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "b293d7a335074c41a561d2ec8875fa66",
        "question": [
          "Query get_job_sla_compliance"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_job_sla_compliance(\"2025-12-15\", \"2026-01-14\") LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "0d0232e2658c43b092da76f4d034e072",
        "question": [
          "Query get_job_failure_trends"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_job_failure_trends(30) LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "85a54635634841f08b48c31aad7eda37",
        "question": [
          "Query get_job_outlier_runs"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_job_outlier_runs(30, 1.0, 30) LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "4b6154809c3a4a44934c74a4cc706ea1",
        "question": [
          "Query get_job_retry_analysis"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_job_retry_analysis(\"2025-12-15\", \"2026-01-14\") LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "fb7533bffc784034a85581f67ea6401f",
        "question": [
          "Query get_job_failure_costs"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_job_failure_costs(\"2025-12-15\", \"2026-01-14\", 20) LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "29b71f5ca3674057ade80bac1fe33560",
        "question": [
          "Show metrics from mv_job_performance"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.mv_job_performance LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "977d878c0e054889b965361b708e2fdc",
        "question": [
          "Show predictions from job_failure_predictions"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${feature_schema}.job_failure_predictions LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "7cc6c0908fe64813aa34ac8d68301d4d",
        "question": [
          "Show predictions from retry_success_predictions"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${feature_schema}.retry_success_predictions LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "c9c9a98619504b55aa78bf556eabb260",
        "question": [
          "Show predictions from sla_breach_predictions"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${feature_schema}.sla_breach_predictions LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "0152e7294b684ef493df2437f92cf898",
        "question": [
          "Get duration predictions"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${feature_schema}.duration_predictions LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "3dc01a0bfe7646e696cf196bd8801610",
        "question": [
          "Show monitoring data from fact_job_run_timeline_profile_metrics"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}_monitoring.fact_job_run_timeline_profile_metrics LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "b8024f02111b4a818d1066c711ed786a",
        "question": [
          "Show monitoring data from fact_job_run_timeline_drift_metrics"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}_monitoring.fact_job_run_timeline_drift_metrics LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "ee90544444c34122857cfa1a293ac3d9",
        "question": [
          "Show data from fact_job_run_timeline"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.fact_job_run_timeline LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "6822226bdf5c45d793d39bae0d8f5c9e",
        "question": [
          "Show data from fact_job_task_run_timeline"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.fact_job_task_run_timeline LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "efbb2859dfee4c9baab7da18b4804abb",
        "question": [
          "Show dim_job"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.dim_job LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "2057d47db7d740fb9effc1fc99def007",
        "question": [
          "Show dim_job_task"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.dim_job_task LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "e068bb6351874922aa206c9e1d254b84",
        "question": [
          "Get workspace dimension"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.dim_workspace LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "a593229f1e0f4116913a91a2f41d872f",
        "question": [
          "Which jobs have the highest failure rates and what are the root causes?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: Which jobs have the highest failure rates and what are the root causes?' AS analysis;"
            ]
          }
        ]
      },
      {
        "id": "193d2e58477d4ec2adf92f180552bf8a",
        "question": [
          "What is the correlation between job duration and failure likelihood?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: What is the correlation between job duration and failure likelihood?' AS analysis;"
            ]
          }
        ]
      },
      {
        "id": "d311a63a46ad424ab891ba57949b68a5",
        "question": [
          "Which jobs would benefit most from retry configuration changes?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: Which jobs would benefit most from retry configuration changes?' AS analysis;"
            ]
          }
        ]
      },
      {
        "id": "8a3e6aa3b6a14b6db410d7560d354de2",
        "question": [
          "What SLA breaches occurred this month and what was the impact?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: What SLA breaches occurred this month and what was the impact?' AS analysis;"
            ]
          }
        ]
      },
      {
        "id": "23c9f8b1ac7e42778392b378092d1ee5",
        "question": [
          "How can we optimize job scheduling to reduce resource contention?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: How can we optimize job scheduling to reduce resource contention?' AS analysis;"
            ]
          }
        ]
      }
    ]
  }
}