{
  "version": 1,
  "config": {
    "sample_questions": [
      {
        "id": "a1a2b3c4d5e6789012345678901234a1",
        "question": [
          "What is the overall platform health score?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234a2",
        "question": [
          "Show me key metrics across all domains"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234a3",
        "question": [
          "Are there any critical alerts today?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234a4",
        "question": [
          "What anomalies were detected across the platform?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234a5",
        "question": [
          "What is our total spend this month?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234a6",
        "question": [
          "Which workspaces cost the most?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234a7",
        "question": [
          "Show me cost anomalies"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234a8",
        "question": [
          "What is our job success rate?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234a9",
        "question": [
          "Show me failed jobs today"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234aa",
        "question": [
          "Which jobs are likely to fail?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234ab",
        "question": [
          "What is our P95 query duration?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234ac",
        "question": [
          "Show me slow queries"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234ad",
        "question": [
          "Which clusters are underutilized?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234ae",
        "question": [
          "Who accessed sensitive data?"
        ]
      },
      {
        "id": "a1a2b3c4d5e6789012345678901234af",
        "question": [
          "Are there any security anomalies?"
        ]
      }
    ]
  },
  "data_sources": {
    "tables": [
      {
        "identifier": "${catalog}.${gold_schema}.dim_workspace"
      },
      {
        "identifier": "${catalog}.${gold_schema}.dim_sku"
      },
      {
        "identifier": "${catalog}.${gold_schema}.dim_job"
      },
      {
        "identifier": "${catalog}.${gold_schema}.dim_user"
      },
      {
        "identifier": "${catalog}.${gold_schema}.fact_usage"
      },
      {
        "identifier": "${catalog}.${gold_schema}.fact_job_run_timeline"
      },
      {
        "identifier": "${catalog}.${gold_schema}.fact_query_history"
      },
      {
        "identifier": "${catalog}.${gold_schema}.fact_audit_logs"
      },
      {
        "identifier": "${catalog}.${gold_schema}.fact_node_timeline"
      },
      {
        "identifier": "${catalog}.${gold_schema}.fact_table_lineage"
      },
      {
        "identifier": "${catalog}.${feature_schema}.pipeline_health_predictions"
      },
      {
        "identifier": "${catalog}.${feature_schema}.data_drift_predictions"
      },
      {
        "identifier": "${catalog}.${gold_schema}_monitoring.fact_job_run_timeline_profile_metrics"
      },
      {
        "identifier": "${catalog}.${gold_schema}_monitoring.fact_query_history_profile_metrics"
      },
      {
        "identifier": "${catalog}.${gold_schema}_monitoring.fact_audit_logs_profile_metrics"
      }
    ],
    "metric_views": [
      {
        "identifier": "${catalog}.${gold_schema}.mv_cost_analytics"
      },
      {
        "identifier": "${catalog}.${gold_schema}.mv_job_performance"
      },
      {
        "identifier": "${catalog}.${gold_schema}.mv_query_performance"
      },
      {
        "identifier": "${catalog}.${gold_schema}.mv_security_events"
      },
      {
        "identifier": "${catalog}.${gold_schema}.mv_data_quality"
      }
    ]
  },
  "instructions": {
    "text_instructions": [
      {
        "id": "f17a43b2f2d2d3eb0b60e8a35c40c766",
        "content": [
          "You are a comprehensive Databricks platform health analyst. Follow these rules:\n",
          "\n",
          "1. **Asset Selection:** Use Metric View for current state, TVFs for lists, Custom Metrics for trends\n",
          "2. **Route by Domain:** Cost\u2192cost_analytics, Jobs\u2192job_performance, Query\u2192query_performance\n",
          "3. **TVFs for Lists:** Use TVFs for \"which\", \"top N\", \"list\" queries\n",
          "4. **Trends:** For \"is X increasing?\" check _drift_metrics tables\n",
          "5. **Date Default:** Cost=30 days, Jobs/Queries=7 days, Security=24 hours\n",
          "6. **Aggregation:** SUM for totals, AVG for averages, COUNT for volumes\n",
          "7. **Sorting:** DESC by primary metric unless specified\n",
          "8. **Limits:** Top 10-20 for ranking queries\n",
          "9. **Health Score:** 0-25=Critical, 26-50=Poor, 51-75=Fair, 76-90=Good, 91-100=Excellent\n",
          "10. **Anomalies:** For \"anomalies\" \u2192 query *_anomaly_predictions tables\n",
          "11. **Forecasts:** For \"forecast/predict\" \u2192 query *_forecast_predictions tables\n",
          "12. **Custom Metrics:** Always include required filters (column_name=':table', log_type='INPUT')\n",
          "13. **Context:** Explain results in business terms\n",
          "14. **Performance:** Never scan Bronze/Silver tables\n"
        ]
      }
    ],
    "example_question_sqls": [
      {
        "id": "d22393a3a1cac061620c9ffe441b0bb5",
        "question": [
          "What is our total spend this month?"
        ],
        "sql": [
          "SELECT MEASURE(total_cost) as mtd_cost\n",
          "FROM ${catalog}.${gold_schema}.mv_cost_analytics\n",
          "WHERE usage_date >= DATE_TRUNC('month', CURRENT_DATE());"
        ],
        "usage_guidance": [
          "Use for current state total cost queries"
        ]
      },
      {
        "id": "447c06638235e6597579d6169547c285",
        "question": [
          "What is our job success rate?"
        ],
        "sql": [
          "SELECT MEASURE(success_rate) as success_pct\n",
          "FROM ${catalog}.${gold_schema}.mv_job_performance\n",
          "WHERE run_date >= CURRENT_DATE() - INTERVAL 7 DAYS;"
        ],
        "usage_guidance": [
          "Use for current job reliability metrics"
        ]
      },
      {
        "id": "ea218d619bdb1bda7135fff13236d7b3",
        "question": [
          "Show me failed jobs today"
        ],
        "sql": [
          "SELECT * FROM TABLE(get_failed_jobs(",
          "  1",
          "))",
          "ORDER BY failure_rate DESC",
          "LIMIT 20;"
        ],
        "usage_guidance": [
          "Use for listing specific failed jobs"
        ]
      }
    ],
    "sql_functions": [
      {
        "id": "e6bf93db94ed4e1ebe453043d0900b61",
        "identifier": "${catalog}.${gold_schema}.get_top_cost_contributors"
      },
      {
        "id": "e6dd28bfdf694362b8ee79a9fc82a4be",
        "identifier": "${catalog}.${gold_schema}.get_cost_trend_by_sku"
      },
      {
        "id": "1e5ce213feee4be483d889b560242fe8",
        "identifier": "${catalog}.${gold_schema}.get_cost_by_owner"
      },
      {
        "id": "1f5e68a556a64c8dbccc48aac6b4daa1",
        "identifier": "${catalog}.${gold_schema}.get_spend_by_custom_tags"
      },
      {
        "id": "dbdeb82eae574080bd165444522d5cf3",
        "identifier": "${catalog}.${gold_schema}.get_tag_coverage"
      },
      {
        "id": "121fdac3852541f8bbc326647cd91b85",
        "identifier": "${catalog}.${gold_schema}.get_cost_week_over_week"
      },
      {
        "id": "298e22dac23949fdb09db89763760634",
        "identifier": "${catalog}.${gold_schema}.get_cost_anomalies"
      },
      {
        "id": "e77b3a7ad846454abf3f90299bc65cd8",
        "identifier": "${catalog}.${gold_schema}.get_cost_forecast_summary"
      },
      {
        "id": "caf5c34d596c471dacbfeb86512858ab",
        "identifier": "${catalog}.${gold_schema}.get_cost_mtd_summary"
      },
      {
        "id": "2aa96fb15d864bcfbc71ca6af36474cc",
        "identifier": "${catalog}.${gold_schema}.get_commit_vs_actual"
      },
      {
        "id": "7fdb9c6b3827485a840fee9561e10884",
        "identifier": "${catalog}.${gold_schema}.get_cost_growth_analysis"
      },
      {
        "id": "5afb264b14b5461fa8f61dffbab77462",
        "identifier": "${catalog}.${gold_schema}.get_cost_growth_by_period"
      },
      {
        "id": "f3657a38917b42b9923be4917fd48d11",
        "identifier": "${catalog}.${gold_schema}.get_failed_jobs"
      },
      {
        "id": "095e2b97dd8f4ab8acb3488e7ab9bcf1",
        "identifier": "${catalog}.${gold_schema}.get_job_success_rate"
      },
      {
        "id": "516131aa5f9741e2823a6a42494e755f",
        "identifier": "${catalog}.${gold_schema}.get_job_duration_percentiles"
      },
      {
        "id": "1cd371765ffe46528d13e6e03baff6d2",
        "identifier": "${catalog}.${gold_schema}.get_job_sla_compliance"
      },
      {
        "id": "de7a6e8845c7499db6a51f96af596719",
        "identifier": "${catalog}.${gold_schema}.get_job_failure_trends"
      },
      {
        "id": "bf59e72d610b4e718d74ce2222ab3ee8",
        "identifier": "${catalog}.${gold_schema}.get_job_outlier_runs"
      },
      {
        "id": "e8da07aa138542b7bf46e261d7c94004",
        "identifier": "${catalog}.${gold_schema}.get_job_retry_analysis"
      },
      {
        "id": "c8cdfd4d6b124d608cab49732276f69f",
        "identifier": "${catalog}.${gold_schema}.get_job_failure_costs"
      },
      {
        "id": "f96f7dae65d84b6b974a08d12d5b8ba9",
        "identifier": "${catalog}.${gold_schema}.get_job_repair_costs"
      },
      {
        "id": "93f9c7d7b6ea438799657290197132af",
        "identifier": "${catalog}.${gold_schema}.get_slow_queries"
      },
      {
        "id": "7ea6e63adf6941e59de3811e388f1d65",
        "identifier": "${catalog}.${gold_schema}.get_query_latency_percentiles"
      },
      {
        "id": "43de1330a50b48fcaf023fee9ceb1c85",
        "identifier": "${catalog}.${gold_schema}.get_warehouse_utilization"
      },
      {
        "id": "5799b6e43305442089557a9c67e41cf7",
        "identifier": "${catalog}.${gold_schema}.get_query_volume_trends"
      },
      {
        "id": "182359727c38483f90972f0504dcadf0",
        "identifier": "${catalog}.${gold_schema}.get_query_efficiency"
      },
      {
        "id": "5279f85be8454e69ba43799db62301f3",
        "identifier": "${catalog}.${gold_schema}.get_failed_queries"
      },
      {
        "id": "2e874c828a2542bc8e4997a1bb055f10",
        "identifier": "${catalog}.${gold_schema}.get_cluster_utilization"
      },
      {
        "id": "2e0bb0d550cd4fb99d3fe0d6f8d80ca2",
        "identifier": "${catalog}.${gold_schema}.get_cluster_resource_metrics"
      },
      {
        "id": "ed1a57373e8249b6a273d76598086f14",
        "identifier": "${catalog}.${gold_schema}.get_underutilized_clusters"
      },
      {
        "id": "e05e6e40507f43c098fd173fb0518fe6",
        "identifier": "${catalog}.${gold_schema}.get_user_activity_summary"
      },
      {
        "id": "a8b466915eef48109111478fe1851fd9",
        "identifier": "${catalog}.${gold_schema}.get_sensitive_table_access"
      },
      {
        "id": "fbb731b848a8488e9ac06d059b8129a2",
        "identifier": "${catalog}.${gold_schema}.get_permission_changes"
      },
      {
        "id": "ceded3ff66c84e0bb39930449008b7b4",
        "identifier": "${catalog}.${gold_schema}.get_security_events_timeline"
      },
      {
        "id": "68f112fcfada44e8befdee025ef819c9",
        "identifier": "${catalog}.${gold_schema}.get_table_freshness"
      },
      {
        "id": "55aab4fc543140a79950647a17763421",
        "identifier": "${catalog}.${gold_schema}.get_pipeline_data_lineage"
      },
      {
        "id": "a5a38afa4713498c99d49605b770df3d",
        "identifier": "${catalog}.${gold_schema}.get_data_quality_summary"
      },
      {
        "id": "6b10d13ee78147779606d433ff959cf0",
        "identifier": "${catalog}.${gold_schema}.get_jobs_without_autoscaling"
      },
      {
        "id": "aeda0cd3d0574b1aa3bfa4f533127196",
        "identifier": "${catalog}.${gold_schema}.get_jobs_on_legacy_dbr"
      },
      {
        "id": "206925a6801646c4af2caa79bcb49335",
        "identifier": "${catalog}.${gold_schema}.get_service_account_audit"
      },
      {
        "id": "44b4a9ebc4214f58b36f7bc952ad22f9",
        "identifier": "${catalog}.${gold_schema}.get_ip_address_analysis"
      }
    ]
  },
  "benchmarks": {
    "questions": [
      {
        "id": "68c31f4909c847918ada8ab8861a7939",
        "question": [
          "Query get_top_cost_contributors"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_top_cost_contributors(\"2025-12-15\", \"2026-01-14\", 20) LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "3aa10f431fe64dde86a914818b5d5c25",
        "question": [
          "Query get_cost_trend_by_sku"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_cost_trend_by_sku(\"2025-12-15\", \"2026-01-14\", \"ALL\") LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "cccebb4fafc9419d9a27f1f2169ab2af",
        "question": [
          "Query get_cost_by_owner"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_cost_by_owner(\"2025-12-15\", \"2026-01-14\", 20) LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "d13becf54fa84192a928a518fdb899b6",
        "question": [
          "Query get_spend_by_custom_tags"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_spend_by_custom_tags(\"2025-12-15\", \"2026-01-14\", \"ALL\") LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "1fe6cc47481d4c4c8b6ff22a95cfc202",
        "question": [
          "Query get_tag_coverage"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_tag_coverage(\"2025-12-15\", \"2026-01-14\") LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "61fca79e13ce4877b7d18e7cfdc9a4aa",
        "question": [
          "Query get_cost_week_over_week"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_cost_week_over_week(4) LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "ce5bd8880d7849ef95989a152642292f",
        "question": [
          "Query get_cost_anomalies"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_cost_anomalies(\"2025-12-15\", \"2026-01-14\", 2.0) LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "922daf5cc01646c88d50a783ffcb4192",
        "question": [
          "Query get_cost_forecast_summary"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.get_cost_forecast_summary(3) LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "e36d041f2a464ed79eb3e6be575093eb",
        "question": [
          "Show metrics from mv_cost_analytics"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.mv_cost_analytics LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "faf904a50a8a4ee7a47f32f130dc7b30",
        "question": [
          "Show metrics from mv_job_performance"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.mv_job_performance LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "5219ef52785145e693a9ef1c2f07cc76",
        "question": [
          "Show predictions from pipeline_health_predictions"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${feature_schema}.pipeline_health_predictions LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "d30617ea6e5e476ca32817629a34604b",
        "question": [
          "Show predictions from data_drift_predictions"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${feature_schema}.data_drift_predictions LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "7727ed5520554a648b4aa3662e0f442b",
        "question": [
          "Show monitoring data from fact_job_run_timeline_profile_metrics"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}_monitoring.fact_job_run_timeline_profile_metrics LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "36043fc0ba2a4d519cc7fb6872262663",
        "question": [
          "Show monitoring data from fact_query_history_profile_metrics"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}_monitoring.fact_query_history_profile_metrics LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "7a956da2baf44c13bea19c8481fd9bc3",
        "question": [
          "Get audit logs profile metrics"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}_monitoring.fact_audit_logs_profile_metrics LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "acc88cadf6394204abf637b998c81475",
        "question": [
          "Show data from fact_usage"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.fact_usage LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "15e7f29e2c204279a81e7bd11f8c3e6e",
        "question": [
          "Show data from fact_job_run_timeline"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.fact_job_run_timeline LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "be913bedd79a4c96942bd7ebb966ebb3",
        "question": [
          "Show data from fact_query_history"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.fact_query_history LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "1e04a35ebf0c4399ad05d1259dd5b513",
        "question": [
          "Show dim_workspace"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.dim_workspace LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "9b275a4c967d437b86cc2e46bd2b2e8b",
        "question": [
          "Show dim_sku"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT * FROM ${catalog}.${gold_schema}.dim_sku LIMIT 20;"
            ]
          }
        ]
      },
      {
        "id": "ae7af8d2a2364534addc026fd476c86e",
        "question": [
          "What is the overall health score of our Databricks platform?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: What is the overall health score of our Databricks platform?' AS analysis;"
            ]
          }
        ]
      },
      {
        "id": "aea6eaca7898496e9b39ce72d7a75f68",
        "question": [
          "Which domain has the most critical issues requiring attention?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: Which domain has the most critical issues requiring attention?' AS analysis;"
            ]
          }
        ]
      },
      {
        "id": "345861f34a2e4c62a8bf7f193001bba0",
        "question": [
          "What are the top 3 actions that would improve platform health?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: What are the top 3 actions that would improve platform health?' AS analysis;"
            ]
          }
        ]
      },
      {
        "id": "f92ab72cde194316aba3984b8dab28d2",
        "question": [
          "How do our cost, reliability, and performance metrics correlate?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: How do our cost, reliability, and performance metrics correlate?' AS analysis;"
            ]
          }
        ]
      },
      {
        "id": "3c12b161d1f640a6bb57551dc681b041",
        "question": [
          "What trends should leadership be aware of this quarter?"
        ],
        "answer": [
          {
            "format": "SQL",
            "content": [
              "SELECT 'Deep research: What trends should leadership be aware of this quarter?' AS analysis;"
            ]
          }
        ]
      }
    ]
  }
}