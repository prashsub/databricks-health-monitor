# Gold Layer Table Schema
# Table: fact_listing_funnel
# Domain: marketplace
# Bronze Source: marketplace.listing_funnel_events
# Generated with: Enhanced LLM-friendly descriptions

table_name: fact_listing_funnel
domain: marketplace
bronze_source: marketplace.listing_funnel_events

description: >
  Fact table capturing marketplace listing impression and conversion data.
  Business: Marketplace analytics - tracks consumer views, clicks, and interactions with
  your data product listings. Essential for optimizing listing visibility, understanding
  buyer journey, and measuring marketplace ROI. Technical: From marketplace.listing_funnel_events.
  365-day retention. Supports streaming.

primary_key:
  columns: ['event_id']
  composite: False

foreign_keys:
  [] # No foreign keys defined

columns:
  - name: account_id
    type: STRING
    nullable: true
    description: "Account identifier. Business: Top-level organizational entity for Databricks deployment, used for account-wide cost rollups, security auditing, and multi-workspace governance. Essential for enterprise billing reconciliation and compliance reporting. Technical: Globally unique STRING identifier from Databricks account management, typically references external billing system. May be nullable in w..."

  - name: metastore_id
    type: STRING
    nullable: true
    description: "The metatore ID that hosts the listing. Business: Used for unique identification, tracking, and cross-system correlation. Essential for joins and dimensional analysis. Technical: Sourced from Bronze layer. STRING type."

  - name: metastore_cloud
    type: STRING
    nullable: true
    description: "The cloud provider of the metastore that hosts the listing. Business: Provides essential context for analytics and operational reporting. Used for filtering, grouping, and drill-down analysis. Technical: Sourced from Bronze layer. STRING type."

  - name: metastore_region
    type: STRING
    nullable: true
    description: "The region of the metastore that hosts the listing. Business: Provides essential context for analytics and operational reporting. Used for filtering, grouping, and drill-down analysis. Technical: Sourced from Bronze layer. STRING type."

  - name: provider_id
    type: STRING
    nullable: true
    description: "The provider profile ID. Business: Used for unique identification, tracking, and cross-system correlation. Essential for joins and dimensional analysis. Technical: Sourced from Bronze layer. STRING type."

  - name: provider_name
    type: STRING
    nullable: true
    description: "The provider profile name. Business: Human-readable identifier for display, filtering, and user-facing reports. Improves data comprehension for business users. Technical: Sourced from Bronze layer. STRING type."

  - name: listing_id
    type: STRING
    nullable: true
    description: "The listing ID. Business: Used for unique identification, tracking, and cross-system correlation. Essential for joins and dimensional analysis. Technical: Sourced from Bronze layer. STRING type."

  - name: listing_name
    type: STRING
    nullable: true
    description: "The listing name. Business: Human-readable identifier for display, filtering, and user-facing reports. Improves data comprehension for business users. Technical: Sourced from Bronze layer. STRING type."

  - name: event_type
    type: STRING
    nullable: true
    description: "The type of consumer action. Possible values for the event_type column are VIEW_LISTING, START_REQUEST_DATA, COMPLETE_REQUEST_DATA, ABANDON_REQUEST_DATA, START_GET_DATA, COMPLETE_GET_DATA, ABANDON_GET_DATA, UNINSTALL_DATA, FAIL_REQUEST_DATA, FAIL_GET_DATA. Business: Provides essential context for analytics and operational reporting. Used for filtering, grouping, and drill-down analysis. Technic..."

  - name: event_time
    type: TIMESTAMP
    nullable: true
    description: "Event timestamp. Business: Precise UTC timestamp when event occurred in source system. Used for time-series analysis, trend detection, and SLA monitoring. Critical for accurate historical reporting and audit trails. Technical: TIMESTAMP with timezone (+00:00 UTC), typically millisecond precision. Used for temporal ordering, time-based partitioning, and change data capture. Part of composite key..."

  - name: event_date
    type: DATE
    nullable: true
    description: "The UTC date the event happened. Business: Used for temporal analysis, trend tracking, and time-based filtering. Critical for historical reporting and time-series analytics. Technical: Sourced from Bronze layer. DATE type."

  - name: consumer_cloud
    type: STRING
    nullable: true
    description: "The consumer's cloud. Nullable if consumer_delta_sharing_recipient_type is OPEN. Business: Provides essential context for analytics and operational reporting. Used for filtering, grouping, and drill-down analysis. Technical: Sourced from Bronze layer. STRING type."

  - name: consumer_region
    type: STRING
    nullable: true
    description: "The consumer's region. Nullable if consumer_delta_sharing_recipient_type is OPEN. Business: Provides essential context for analytics and operational reporting. Used for filtering, grouping, and drill-down analysis. Technical: Sourced from Bronze layer. STRING type."

